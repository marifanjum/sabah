<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Social Card Generator</title>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Urdu font -->
  <link href="https://cdn.jsdelivr.net/npm/jameel-noori@1.1.2/jameel-noori.min.css" rel="stylesheet">
  <!-- html2canvas -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    #cardContainer {
      width: 1080px;
      height: 1080px;
      position: relative;
      background: url("bg.png") no-repeat center center / cover; /* Hard-coded background */
      overflow: hidden;
    }
    .draggable {
      position: absolute;
      cursor: move;
      user-select: none;
    }
  </style>
</head>
<body class="bg-gray-100 p-6 font-sans">
  <div class="flex flex-col md:flex-row gap-6">
    
    <!-- Controls -->
    <div class="w-full md:w-1/3 space-y-4">
      <div>
        <label class="block font-bold">Headline:</label>
        <input id="headlineInput" type="text" class="w-full border rounded p-1">
      </div>
      <div>
        <label class="block font-bold">Subheading:</label>
        <input id="subheadingInput" type="text" class="w-full border rounded p-1">
      </div>
      <div>
        <label class="block font-bold">Headline Size:</label>
        <input id="headlineSize" type="range" min="30" max="120" value="80" class="w-full">
      </div>
      <div>
        <label class="block font-bold">Line Height:</label>
        <input id="lineHeight" type="range" min="30" max="150" value="90" class="w-full">
      </div>
      <div>
        <label class="block font-bold">First Line Word:</label>
        <input id="firstWordInput" type="text" placeholder="Highlight word">
      </div>
      <div>
        <label class="block font-bold">Headline Y Position:</label>
        <input id="headlineY" type="range" min="100" max="900" value="750" class="w-full">
      </div>
      <div>
        <label class="block font-bold">Subheading Y Position:</label>
        <input id="subheadingY" type="range" min="200" max="1000" value="900" class="w-full">
      </div>
      <div>
        <label class="block font-bold">Logo Position:</label>
        <select id="logoPosition" class="border rounded p-1">
          <option value="top-right">Top Right</option>
          <option value="top-left">Top Left</option>
          <option value="bottom-right">Bottom Right</option>
          <option value="bottom-left">Bottom Left</option>
        </select>
      </div>
      <div>
        <label class="block font-bold">Filename:</label>
        <input id="filenameInput" type="text" placeholder="social-card" class="w-full border rounded p-1">
      </div>
      <button id="downloadBtn" class="bg-blue-600 text-white px-4 py-2 rounded">Download PNG</button>
    </div>
    
    <!-- Card Preview -->
    <div class="w-full md:w-2/3 flex justify-center items-center">
      <div id="cardContainer">
        <div id="headline" 
             class="draggable w-full text-center font-[Jameel-Noori] text-[80px] text-[#fff403]" 
             style="top:750px; line-height:90px;">
        </div>
        <div id="subheading" 
             class="draggable w-full text-center font-[Jameel-Noori] text-[50px] text-[#fff403]" 
             style="top:900px;">
        </div>
        <img id="logoImage" src="sabah-logo.PNG" class="absolute top-5 right-5 w-[120px] h-[100px]">
        <div id="borderOverlay" class="absolute inset-0 border-8 border-white pointer-events-none"></div>
      </div>
    </div>
    
  </div>

<script>
  const headlineInput = document.getElementById("headlineInput");
  const subheadingInput = document.getElementById("subheadingInput");
  const headlineSize = document.getElementById("headlineSize");
  const lineHeight = document.getElementById("lineHeight");
  const firstWordInput = document.getElementById("firstWordInput");
  const headlineY = document.getElementById("headlineY");
  const subheadingY = document.getElementById("subheadingY");
  const logoPosition = document.getElementById("logoPosition");
  const filenameInput = document.getElementById("filenameInput");
  const downloadBtn = document.getElementById("downloadBtn");

  const headline = document.getElementById("headline");
  const subheading = document.getElementById("subheading");
  const logoImage = document.getElementById("logoImage");

  // Headline text + first word highlight
  function updateHeadline() {
    const words = headlineInput.value.trim().split(" ");
    if (firstWordInput.value && words[0] === firstWordInput.value) {
      words[0] = `<span style="color:red;">${words[0]}</span>`;
    }
    headline.innerHTML = words.join(" ");
  }

  headlineInput.addEventListener("input", updateHeadline);
  firstWordInput.addEventListener("input", updateHeadline);

  // Subheading text
  subheadingInput.addEventListener("input", () => {
    subheading.textContent = subheadingInput.value;
  });

  // Font size + line height
  headlineSize.addEventListener("input", () => {
    headline.style.fontSize = headlineSize.value + "px";
  });
  lineHeight.addEventListener("input", () => {
    headline.style.lineHeight = lineHeight.value + "px";
  });

  // Y positions
  headlineY.addEventListener("input", () => {
    headline.style.top = headlineY.value + "px";
  });
  subheadingY.addEventListener("input", () => {
    subheading.style.top = subheadingY.value + "px";
  });

  // Logo position
  logoPosition.addEventListener("change", () => {
    logoImage.classList.remove("top-5","right-5","left-5","bottom-5");
    switch(logoPosition.value) {
      case "top-left":
        logoImage.style.top = "20px"; logoImage.style.left = "20px";
        logoImage.style.right = "auto"; logoImage.style.bottom = "auto";
        break;
      case "top-right":
        logoImage.style.top = "20px"; logoImage.style.right = "20px";
        logoImage.style.left = "auto"; logoImage.style.bottom = "auto";
        break;
      case "bottom-left":
        logoImage.style.bottom = "20px"; logoImage.style.left = "20px";
        logoImage.style.top = "auto"; logoImage.style.right = "auto";
        break;
      case "bottom-right":
        logoImage.style.bottom = "20px"; logoImage.style.right = "20px";
        logoImage.style.top = "auto"; logoImage.style.left = "auto";
        break;
    }
  });

  // Dragging for headline + subheading
  function makeDraggable(el) {
    let offsetX, offsetY, isDragging = false;

    el.addEventListener("mousedown", e => {
      isDragging = true;
      offsetX = e.clientX - el.offsetLeft;
      offsetY = e.clientY - el.offsetTop;
      el.style.zIndex = 1000;
    });
    document.addEventListener("mousemove", e => {
      if (!isDragging) return;
      el.style.left = e.clientX - offsetX + "px";
      el.style.top = e.clientY - offsetY + "px";
    });
    document.addEventListener("mouseup", () => {
      isDragging = false;
      el.style.zIndex = "";
    });
  }
  makeDraggable(headline);
  makeDraggable(subheading);

  // Export
  function exportAsImage() {
    const filename = filenameInput.value.trim() || "social-card";
    html2canvas(document.getElementById("cardContainer"), {
      useCORS: true,
      scale: 1
    }).then(canvas => {
      const link = document.createElement("a");
      link.download = filename + ".png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }).catch(err => console.error("Export failed:", err));
  }
  downloadBtn.addEventListener("click", exportAsImage);

  // Initial render
  updateHeadline();
</script>
</body>
</html>
